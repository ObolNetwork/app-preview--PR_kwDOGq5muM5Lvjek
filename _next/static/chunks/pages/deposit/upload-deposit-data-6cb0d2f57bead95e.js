(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[875],{94017:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/deposit/upload-deposit-data",function(){return n(53675)}])},53675:function(t,e,n){"use strict";n.a(t,(async function(t,r){try{n.r(e);var o=n(34051),i=n.n(o),a=n(85893),s=n(67294),u=n(93445),c=n(32512),l=n(71553),d=n(8507),f=n(82705),p=n(37274),h=n(92466),g=n(11163),v=n(23691),y=t([h]);function m(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,o)}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){w(t,e,n[e])}))}return t}h=(y.then?(await y)():y)[0];var b=function(){var t=(0,s.useState)(!1),e=t[0],n=t[1],r=(0,s.useState)(""),o=r[0],y=r[1],b=(0,s.useState)(null),w=(b[0],b[1]),x=(0,s.useState)(""),k=x[0],j=x[1],S=(0,p.o)((function(t){return t.setDepositData})),D=(0,g.useRouter)(),C=(0,p.o)((0,s.useCallback)((function(t){return t.completeDepositStep}),[])),R=(0,p.o)((function(t){return t.enableDepositStep})),O=(0,c.u)({accept:"application/json",noClick:e,onDrop:function(t,e){if(y(""),null===e||void 0===e?void 0:e.length)y("That is not a valid deposit_data JSON file.");else if(1==t.length){var r=new FileReader;r.onload=function(){var e,r=(e=i().mark((function e(r){var o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.target)try{r.target.result&&"string"===typeof r.target.result&&((o=(0,h.R)(JSON.parse(r.target.result)))?(j(t[0].name),S(o.map((function(t){return _({},t,{transactionStatus:d.LN.READY,depositStatus:d.Er.READY_FOR_DEPOSIT})}))),n(!0)):(n(!1),y("not a valid ".concat(v.rk," file"))))}catch(i){a=i.message,n(!1),y(a)}case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(t){m(i,r,o,a,s,"next",t)}function s(t){m(i,r,o,a,s,"throw",t)}a(void 0)}))});return function(t){return r.apply(this,arguments)}}(),r.readAsText(t[0])}else y("Activate only one deposit file at a time")}}),E=O.isDragAccept,P=O.getRootProps,$=O.getInputProps,A=(0,s.useCallback)((function(){S([]),w(null),y(""),n(!1)}),[S]);return(0,a.jsxs)(u.kC,{direction:"column",css:{gap:"$2xl"},children:[(0,a.jsx)(l.xv,{variant:"h3",children:"Upload Deposit Data "}),(0,a.jsxs)(l.W2,{className:"enr-section",alignItems:"start",css:{gap:"$lg"},children:[(0,a.jsxs)(l.xv,{variant:"body",children:["Upload the ",(0,a.jsx)(l.xv,{variant:"pill",color:"create",children:v.rk})," file you generated during the ceremony. It is located in the ",(0,a.jsx)(l.xv,{variant:"pill",color:"create",children:".charon/"})," subfolder."]}),(0,a.jsxs)(l.xv,{variant:"body",children:["Note: if you can't find ",(0,a.jsx)(l.xv,{variant:"pill",color:"create",children:".charon"}),", search for how to show hidden folder in your OS."]}),(0,a.jsx)(u.kC,{css:{bc:"$bg03",p:"$2xl",boxSizing:"border-box"},children:(0,a.jsxs)(u.kC,_({css:{flexDirection:"column",alignItems:"center"}},P({isDragAccept:E}),{children:[(0,a.jsx)("input",_({},$())),(0,a.jsx)(f.w,{isDragAccept:E,isFileAccepted:e}),(0,a.jsx)(l.xv,{css:{mt:"$lg",color:"$body",fontWeight:"$medium",fontSize:"$4",lineHeight:"24px"},children:e?(0,a.jsxs)(u.kC,{css:{gap:"$sm"},children:[k,(0,a.jsx)(l.xu,{onClick:A,children:(0,a.jsx)(l.Tw,{css:{color:"$obolGreen"}})})]}):o?(0,a.jsx)(l.xv,{variant:"metadata",color:"test",children:o}):"Upload a valid json file."})]}))}),(0,a.jsxs)(u.kC,{children:[(0,a.jsx)(l.zx,{css:{width:"25%",backgroundColor:"$bg03",color:"$body",marginRight:"$sm"},onClick:function(){D.push("/deposit/advisories")},children:"Back"}),(0,a.jsx)(l.zx,{fullWidth:!0,disabled:!e,onClick:function(){!function(){C("upload-deposit-data");var t=R("connect-wallet");D.push(t.href)}()},children:"Continue"})]})]})]})};e.default=b,b.layout="DepositProgressTrackerLayout",r()}catch(m){r(m)}}))},92466:function(t,e,n){"use strict";n.a(t,(async function(t,r){try{n.d(e,{R:function(){return s}});var o=n(23691),i=n(54718),a=t([i]);i=(a.then?(await a)():a)[0];var s=function(t){return!!Array.isArray(t)&&t.map((function(t){if(!u(t))throw new Error("Missing required keys");if(!(0,i.uM)(t))throw new Error("Deposit Signature can't be verified");if(!(0,i.zJ)(t))throw new Error("Deposit Root can't be verified");return t}))},u=function(t){return!!((e=t).pubkey&&e.withdrawal_credentials&&e.amount&&e.signature&&e.deposit_message_root&&e.deposit_data_root&&e.fork_version&&e.network_name&&e.deposit_cli_version)&&"string"===typeof e.pubkey&&"string"===typeof e.withdrawal_credentials&&"number"===typeof e.amount&&"string"===typeof e.signature&&"string"===typeof e.deposit_message_root&&"string"===typeof e.deposit_data_root&&"string"===typeof e.fork_version&&"string"===typeof e.network_name&&"string"===typeof e.deposit_cli_version&&96===e.pubkey.length&&64===e.withdrawal_credentials.length&&192===e.signature.length&&64===e.deposit_message_root.length&&64===e.deposit_data_root.length&&8===e.fork_version.length&&!(e.amount<o.do||e.amount>32*o.jK);var e};r()}catch(c){r(c)}}))},54718:function(t,e,n){"use strict";n.a(t,(async function(t,r){try{n.d(e,{zJ:function(){return l},uM:function(){return p}});var o=n(38759),i=n(25874),a=n(23691),s=n(8507),u=n(48764).Buffer,c=t([o]);o=(c.then?(await c)():c)[0];var l=function(t){var e=(0,s.kA)(),n=e.defaultValue();n.pubkey=(0,i.Wu)(t.pubkey),n.withdrawalCredentials=(0,i.Wu)(t.withdrawal_credentials),n.amount=t.amount;var r=(0,s.Jb)(),o=r.defaultValue();return o.pubkey=(0,i.Wu)(t.pubkey),o.withdrawalCredentials=(0,i.Wu)(t.withdrawal_credentials),o.amount=t.amount,o.signature=(0,i.Wu)(t.signature),u.from(e.hashTreeRoot(n).buffer).toString("hex")===t.deposit_message_root&&u.from(r.hashTreeRoot(o).buffer).toString("hex")===t.deposit_data_root},d=function(t){return u.from(t,"hex")},f=function(t,e){var n=(0,s.ME)(),r=n.defaultValue();return r.currentVersion=t,r.genesisValidatorsRoot=e,u.from(n.hashTreeRoot(r).buffer)},p=function(t){var e=d(t.pubkey),n=d(t.signature),r=d(t.deposit_message_root),i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d(a.se.substring(2,a.se.length)),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d(a.qH),r=f(e,n),o=new Uint8Array(32);return o.set(t),o.set(r.subarray(0,28),4),o}(d(a.ms)),c=function(t,e){var n=(0,s.bX)(),r=n.defaultValue();return r.objectRoot=t,r.domain=e,u.from(n.hashTreeRoot(r).buffer)}(r,i);return o.ZP.verify(e,c,n)};r()}catch(h){r(h)}}))},99715:function(){}},function(t){t.O(0,[240,544,774,888,179],(function(){return e=94017,t(t.s=e);var e}));var e=t.O();_N_E=e}]);